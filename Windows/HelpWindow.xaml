<Window x:Class="AGR_Project_Manager.Windows.HelpWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="📖 Справка — AGR Project Manager"
        Height="700" Width="850"
        MinHeight="500" MinWidth="650"
        WindowStartupLocation="CenterScreen"
        Background="{DynamicResource BackgroundPrimary}"
        Icon="/Resource/app_icon.ico">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Заголовок -->
        <Border Grid.Row="0" Background="{DynamicResource BackgroundSecondary}" Padding="20,15">
            <StackPanel>
                <TextBlock Text="AGR Project Manager" 
                           FontSize="24" 
                           FontWeight="Bold" 
                           Foreground="{DynamicResource ForegroundPrimary}"/>
                <TextBlock Text="Управление проектами и текстурами для АГР" 
                           FontSize="13" 
                           Foreground="{DynamicResource ForegroundTertiary}"
                           Margin="0,3,0,0"/>
            </StackPanel>
        </Border>

        <!-- Контент -->
        <ScrollViewer Grid.Row="1" 
                      VerticalScrollBarVisibility="Auto"
                      Padding="20,15">
            <StackPanel>

                <!-- Быстрый старт -->
                <Border Background="{DynamicResource AccentPrimary}" 
                        CornerRadius="8" Padding="15" Margin="0,0,0,15"
                        Opacity="0.9">
                    <StackPanel>
                        <TextBlock Text="🚀 Быстрый старт" 
                                   FontSize="16" FontWeight="Bold" 
                                   Foreground="{DynamicResource ForegroundPrimary}"/>
                        <TextBlock Foreground="{DynamicResource ForegroundPrimary}" 
                                   FontSize="12" Margin="0,8,0,0" TextWrapping="Wrap" Opacity="0.95">
                            <Run FontWeight="SemiBold">1.</Run> Создайте проект (➕ Новый проект)
                            <Run FontWeight="SemiBold">→ 2.</Run> Загрузите текстуры в UDIM тайлы (клик по D/E/N)
                            <Run FontWeight="SemiBold">→ 3.</Run> Экспортируйте с правильными именами
                        </TextBlock>
                    </StackPanel>
                </Border>

                <!-- Основные функции в 2 колонки -->
                <Grid Margin="0,0,0,15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="15"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Левая колонка -->
                    <StackPanel Grid.Column="0">

                        <!-- Проекты -->
                        <Border Background="{DynamicResource BackgroundSecondary}" 
                                CornerRadius="6" Padding="12" Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock Text="📁 Проекты" FontSize="14" FontWeight="Bold" 
                                           Foreground="{DynamicResource HelpSectionProjects}"/>
                                <TextBlock Foreground="{DynamicResource ForegroundSecondary}" 
                                           FontSize="11" Margin="0,6,0,0" TextWrapping="Wrap">
                                    • <Run FontWeight="SemiBold">Создать</Run> — кнопка в левой панели
                                    <LineBreak/>• <Run FontWeight="SemiBold">✏️</Run> редактировать, <Run FontWeight="SemiBold">📋</Run> дублировать, <Run FontWeight="SemiBold">❌</Run> удалить
                                </TextBlock>
                            </StackPanel>
                        </Border>

                        <!-- Модели -->
                        <Border Background="{DynamicResource BackgroundSecondary}" 
                                CornerRadius="6" Padding="12" Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock Text="🏠 Модели" FontSize="14" FontWeight="Bold" 
                                           Foreground="{DynamicResource HelpSectionModels}"/>
                                <TextBlock Foreground="{DynamicResource ForegroundSecondary}" 
                                           FontSize="11" Margin="0,6,0,0" TextWrapping="Wrap">
                                    • Вкладки: 001, 002, Ground и т.д.
                                    <LineBreak/>• Название модели → имя файла при экспорте
                                    <LineBreak/>• Кнопки на вкладке: переименовать, копировать, удалить
                                </TextBlock>
                            </StackPanel>
                        </Border>

                        <!-- UDIM -->
                        <Border Background="{DynamicResource BackgroundSecondary}" 
                                CornerRadius="6" Padding="12" Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock Text="🎨 UDIM тайлы" FontSize="14" FontWeight="Bold" 
                                           Foreground="{DynamicResource HelpSectionUdim}"/>
                                <TextBlock Foreground="{DynamicResource ForegroundSecondary}" 
                                           FontSize="11" Margin="0,6,0,0" TextWrapping="Wrap">
                                    • <Run Foreground="{DynamicResource TextureDiffuse}" FontWeight="Bold">D</Run> — Diffuse, 
                                      <Run Foreground="{DynamicResource TextureErm}" FontWeight="Bold">E</Run> — ERM, 
                                      <Run Foreground="{DynamicResource TextureNormal}" FontWeight="Bold">N</Run> — Normal
                                    <LineBreak/>• Клик по зоне → загрузка текстуры
                                    <LineBreak/>• Клик по названию → переименовать материал
                                    <LineBreak/>• Выбрать тайл → Копировать → Вставить
                                </TextBlock>
                            </StackPanel>
                        </Border>

                        <!-- Пресеты -->
                        <Border Background="{DynamicResource BackgroundSecondary}" 
                                CornerRadius="6" Padding="12">
                            <StackPanel>
                                <TextBlock Text="💾 Пресеты" FontSize="14" FontWeight="Bold" 
                                           Foreground="{DynamicResource HelpSectionPresets}"/>
                                <TextBlock Foreground="{DynamicResource ForegroundSecondary}" 
                                           FontSize="11" Margin="0,6,0,0" TextWrapping="Wrap">
                                    • Сохраняйте наборы текстур для повторного использования
                                    <LineBreak/>• Выбрать тайл → Сохранить как пресет
                                    <LineBreak/>• Выбрать тайл → Выбрать пресет → Применить
                                </TextBlock>
                            </StackPanel>
                        </Border>
                    </StackPanel>

                    <!-- Правая колонка -->
                    <StackPanel Grid.Column="2">

                        <!-- Экспорт -->
                        <Border Background="{DynamicResource BackgroundSecondary}" 
                                CornerRadius="6" Padding="12" Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock Text="📤 Экспорт" FontSize="14" FontWeight="Bold" 
                                           Foreground="{DynamicResource HelpSectionExport}"/>
                                <TextBlock Foreground="{DynamicResource ForegroundSecondary}" 
                                           FontSize="11" Margin="0,6,0,0" TextWrapping="Wrap">
                                    • Шаблон: <Run FontFamily="Consolas" Foreground="{DynamicResource CodeText}">T_Проект_001_Diffuse_1.1001.png</Run>
                                    <LineBreak/>• Текущая модель — только активная вкладка
                                    <LineBreak/>• Все модели — каждая в свою папку
                                </TextBlock>
                            </StackPanel>
                        </Border>

                        <!-- Горячие клавиши -->
                        <Border Background="{DynamicResource BackgroundSecondary}" 
                                CornerRadius="6" Padding="12" Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock Text="⌨️ Горячие клавиши" FontSize="14" FontWeight="Bold" 
                                           Foreground="{DynamicResource HelpSectionHotkeys}"/>
                                <Grid Margin="0,6,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="80"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Enter" 
                                               FontFamily="Consolas" Foreground="{DynamicResource CodeText}" FontSize="11"/>
                                    <TextBlock Grid.Row="0" Grid.Column="1" Text="Сохранить в диалогах" 
                                               Foreground="{DynamicResource ForegroundSecondary}" FontSize="11"/>

                                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Escape" 
                                               FontFamily="Consolas" Foreground="{DynamicResource CodeText}" FontSize="11"/>
                                    <TextBlock Grid.Row="1" Grid.Column="1" Text="Отмена" 
                                               Foreground="{DynamicResource ForegroundSecondary}" FontSize="11"/>

                                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Ctrl+Enter" 
                                               FontFamily="Consolas" Foreground="{DynamicResource CodeText}" FontSize="11"/>
                                    <TextBlock Grid.Row="2" Grid.Column="1" Text="Сохранить проект" 
                                               Foreground="{DynamicResource ForegroundSecondary}" FontSize="11"/>
                                </Grid>
                            </StackPanel>
                        </Border>

                        <!-- Хранение -->
                        <Border Background="{DynamicResource BackgroundSecondary}" 
                                CornerRadius="6" Padding="12">
                            <StackPanel>
                                <TextBlock Text="💾 Хранение данных" FontSize="14" FontWeight="Bold" 
                                           Foreground="{DynamicResource HelpSectionStorage}"/>
                                <TextBlock Foreground="{DynamicResource ForegroundSecondary}" 
                                           FontSize="11" Margin="0,6,0,0" TextWrapping="Wrap">
                                    • Всё в папке <Run FontFamily="Consolas">Data\</Run> рядом с программой
                                    <LineBreak/>• Автосохранение при любых изменениях
                                    <LineBreak/>• Хранятся пути к текстурам, не сами файлы
                                </TextBlock>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Grid>

                <!-- Утилиты -->
                <TextBlock Text="🔧 Утилиты" 
                           FontSize="16" FontWeight="Bold" 
                           Foreground="{DynamicResource HelpSectionUtilities}"
                           Margin="0,5,0,10"/>

                <Grid Margin="0,0,0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- RAL Colors -->
                    <Border Grid.Column="0" Background="{DynamicResource HelpBoxPurple}" 
                            CornerRadius="6" Padding="12" Margin="0,0,7,0">
                        <StackPanel>
                            <TextBlock Text="🎨 RAL Colors" FontWeight="Bold" 
                                       Foreground="{DynamicResource ForegroundPrimary}" FontSize="13"/>
                            <TextBlock Foreground="{DynamicResource ForegroundSecondary}" 
                                       FontSize="11" Margin="0,5,0,0" TextWrapping="Wrap">
                                Поиск по каталогу RAL. Клик по HEX — копирование. 
                                Экспорт в PNG (256–4096 px).
                            </TextBlock>
                        </StackPanel>
                    </Border>

                    <!-- Name Generator -->
                    <Border Grid.Column="1" Background="{DynamicResource HelpBoxGreen}" 
                            CornerRadius="6" Padding="12" Margin="7,0,0,0">
                        <StackPanel>
                            <TextBlock Text="🔤 Name Generator" FontWeight="Bold" 
                                       Foreground="{DynamicResource ForegroundPrimary}" FontSize="13"/>
                            <TextBlock Foreground="{DynamicResource ForegroundSecondary}" 
                                       FontSize="11" Margin="0,5,0,0" TextWrapping="Wrap">
                                Генерация имён файлов по стандарту: геометрия, материалы, 
                                текстуры, FBX, архивы. Клик — копирование.
                            </TextBlock>
                        </StackPanel>
                    </Border>
                </Grid>

                <Grid Margin="0,0,0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Create Folder -->
                    <Border Grid.Column="0" Background="{DynamicResource HelpBoxRed}" 
                            CornerRadius="6" Padding="12" Margin="0,0,7,0">
                        <StackPanel>
                            <TextBlock Text="📁 Создать папку" FontWeight="Bold" 
                                       Foreground="{DynamicResource ForegroundPrimary}" FontSize="13"/>
                            <TextBlock Foreground="{DynamicResource ForegroundSecondary}" 
                                       FontSize="11" Margin="0,5,0,0" TextWrapping="Wrap">
                                Создаёт структуру папок: source, export, work, AGR_Check 
                                с подпапками HP/LP.
                            </TextBlock>
                        </StackPanel>
                    </Border>

                    <!-- GeoJSON Generator -->
                    <Border Grid.Column="1" Background="{DynamicResource HelpBoxBlue}" 
                            CornerRadius="6" Padding="12" Margin="7,0,0,0">
                        <StackPanel>
                            <TextBlock Text="🌍 GeoJSON Generator" FontWeight="Bold" 
                                       Foreground="{DynamicResource ForegroundPrimary}" FontSize="13"/>
                            <TextBlock Foreground="{DynamicResource ForegroundSecondary}" 
                                       FontSize="11" Margin="0,5,0,0" TextWrapping="Wrap">
                                Создание .geojson для загрузки на mos.ru. 
                                Координаты, параметры стёкол, превью.
                            </TextBlock>
                        </StackPanel>
                    </Border>
                </Grid>

                <!-- GeoJSON подробнее -->
                <Border Background="{DynamicResource BackgroundSecondary}" 
                        CornerRadius="8" Padding="15" Margin="0,5,0,0">
                    <StackPanel>
                        <TextBlock Text="🌍 GeoJSON Generator — подробнее" 
                                   FontSize="14" FontWeight="Bold" 
                                   Foreground="{DynamicResource HelpSectionModels}"/>

                        <Grid Margin="0,10,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- Колонка 1: Properties -->
                            <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                <TextBlock Text="📋 Properties" FontWeight="SemiBold" 
                                           Foreground="{DynamicResource ForegroundQuaternary}" FontSize="11"/>
                                <TextBlock Foreground="{DynamicResource ForegroundSecondary}" 
                                           FontSize="10" Margin="0,4,0,0" TextWrapping="Wrap">
                                    • address, okrug, rajon
                                    <LineBreak/>• cadNum (кадастровый номер)
                                    <LineBreak/>• FNO_code, FNO_name (306-ПП)
                                    <LineBreak/>• Высоты: h_relief, h_otn, h_abs
                                    <LineBreak/>• Площади: s_obsh, s_naz, s_podz
                                </TextBlock>
                            </StackPanel>

                            <!-- Колонка 2: Glasses -->
                            <StackPanel Grid.Column="1" Margin="5,0">
                                <TextBlock Text="🪟 Glasses (стёкла)" FontWeight="SemiBold" 
                                           Foreground="{DynamicResource ForegroundQuaternary}" FontSize="11"/>
                                <TextBlock Foreground="{DynamicResource ForegroundSecondary}" 
                                           FontSize="10" Margin="0,4,0,0" TextWrapping="Wrap">
                                    • Название материала
                                    <LineBreak/>• Цвет RGB (палитра)
                                    <LineBreak/>• Прозрачность, преломление
                                    <LineBreak/>• Шероховатость, металличность
                                    <LineBreak/>• Пресеты для быстрого ввода
                                </TextBlock>
                            </StackPanel>

                            <!-- Колонка 3: Image + Export -->
                            <StackPanel Grid.Column="2" Margin="10,0,0,0">
                                <TextBlock Text="🖼️ Image &amp; Export" FontWeight="SemiBold" 
                                           Foreground="{DynamicResource ForegroundQuaternary}" FontSize="11"/>
                                <TextBlock Foreground="{DynamicResource ForegroundSecondary}" 
                                           FontSize="10" Margin="0,4,0,0" TextWrapping="Wrap">
                                    • Превью 256×256 jpg
                                    <LineBreak/>• Загрузить или Ctrl+V
                                    <LineBreak/>• Export Current — текущая модель
                                    <LineBreak/>• Export All — все модели
                                    <LineBreak/>• Имя: SM_Проект_001.geojson
                                </TextBlock>
                            </StackPanel>
                        </Grid>

                        <!-- Подсказки -->
                        <Border Background="{DynamicResource BackgroundPrimary}" 
                                CornerRadius="4" Padding="10" Margin="0,12,0,0">
                            <TextBlock Foreground="{DynamicResource ForegroundTertiary}" 
                                       FontSize="10" TextWrapping="Wrap">
                                <Run FontWeight="SemiBold">💡</Run> Поля синхронизируются между моделями (кроме координат, стёкол, изображения).
                                Для Ground: FNO_name = "Благоустройство территории", поля высот/площадей пустые.
                            </TextBlock>
                        </Border>
                    </StackPanel>
                </Border>

            </StackPanel>
        </ScrollViewer>

        <!-- Нижняя панель -->
        <Border Grid.Row="2" Background="{DynamicResource BackgroundSecondary}" Padding="15,10">
            <Grid>
                <TextBlock Text="© 2024 AGR Project Manager" 
                           Foreground="{DynamicResource ForegroundDisabled}" 
                           VerticalAlignment="Center"
                           FontSize="11"/>
                <Button Content="Закрыть" 
                        Background="{DynamicResource ButtonBackground}" 
                        Foreground="{DynamicResource ForegroundPrimary}"
                        Padding="20,6"
                        HorizontalAlignment="Right"
                        Cursor="Hand"
                        Click="Close_Click"/>
            </Grid>
        </Border>
    </Grid>
</Window>