<Window x:Class="AGR_Project_Manager.Windows.RalColorsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="🎨 RAL Colors" 
        Height="500" Width="500"
        MinHeight="450" MinWidth="400"
        WindowStartupLocation="CenterOwner"
        Background="{DynamicResource BackgroundPrimary}"
        Loaded="Window_Loaded">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="20"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="20"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Поиск -->
        <Grid Grid.Row="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- TextBox с плейсхолдером -->
            <Grid>
                <TextBox x:Name="SearchTextBox"
                         Background="{DynamicResource BackgroundTertiary}"
                         Foreground="{DynamicResource ForegroundPrimary}"
                         BorderBrush="{DynamicResource BorderPrimary}"
                         Padding="12,10"
                         FontSize="16"
                         CaretBrush="{DynamicResource ForegroundPrimary}"
                         VerticalContentAlignment="Center"
                         TextChanged="SearchTextBox_TextChanged"
                         KeyDown="SearchTextBox_KeyDown"/>

                <!-- Плейсхолдер (скрывается когда есть текст) -->
                <TextBlock x:Name="SearchPlaceholder"
                           Text="Введите номер RAL (например: 1000, 3020, 5015)"
                           Foreground="{DynamicResource ForegroundDisabled}"
                           FontSize="14"
                           Margin="14,0,0,0"
                           VerticalAlignment="Center"
                           IsHitTestVisible="False"/>
            </Grid>

            <Button Grid.Column="1" 
                    Content="🔍" 
                    Background="{DynamicResource AccentPrimary}" 
                    Foreground="{DynamicResource ForegroundPrimary}"
                    FontSize="16"
                    Padding="15,10"
                    Margin="10,0,0,0"
                    Cursor="Hand"
                    Click="SearchBtn_Click"/>
        </Grid>

        <!-- Результат -->
        <Border Grid.Row="2" 
                Background="{DynamicResource BackgroundSecondary}" 
                CornerRadius="8"
                Padding="20">

            <!-- Когда ничего не найдено -->
            <TextBlock x:Name="PlaceholderText"
                       Text="Введите номер RAL для поиска"
                       Foreground="{DynamicResource ForegroundDisabled}"
                       FontSize="14"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"/>

        </Border>

        <!-- Панель с найденным цветом (изначально скрыта) -->
        <Border x:Name="ResultPanel" 
                Grid.Row="2" 
                Background="{DynamicResource BackgroundSecondary}" 
                CornerRadius="8"
                Padding="20"
                Visibility="Collapsed">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Плитка цвета -->
                <Border x:Name="ColorTile"
                        Grid.Row="0"
                        CornerRadius="8"
                        MinHeight="150"
                        Margin="0,0,0,15">
                    <Border.Effect>
                        <DropShadowEffect BlurRadius="15" ShadowDepth="3" Opacity="0.3"/>
                    </Border.Effect>
                </Border>

                <!-- Информация о цвете -->
                <StackPanel Grid.Row="1">
                    <!-- Код и название -->
                    <TextBlock x:Name="ColorCodeText"
                               FontSize="22"
                               FontWeight="Bold"
                               Foreground="{DynamicResource ForegroundPrimary}"
                               HorizontalAlignment="Center"/>
                    <TextBlock x:Name="ColorNameText"
                               FontSize="14"
                               Foreground="{DynamicResource ForegroundSecondary}"
                               HorizontalAlignment="Center"
                               Margin="0,5,0,15"/>

                    <!-- HEX (копируемый) -->
                    <Border Background="{DynamicResource BackgroundPrimary}" 
                            CornerRadius="6" 
                            Padding="15,10"
                            Margin="0,0,0,10"
                            Cursor="Hand"
                            MouseLeftButtonDown="CopyHex_Click"
                            ToolTip="Нажмите, чтобы скопировать">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="HEX" 
                                       Foreground="{DynamicResource ForegroundTertiary}" 
                                       FontSize="12" VerticalAlignment="Center"/>
                            <TextBlock x:Name="HexText" 
                                       Grid.Column="1" 
                                       FontSize="16" 
                                       FontWeight="SemiBold"
                                       FontFamily="Consolas"
                                       Foreground="{DynamicResource CodeText}" 
                                       HorizontalAlignment="Center"/>
                            <TextBlock Text="📋" Grid.Column="2" FontSize="14" VerticalAlignment="Center"/>
                        </Grid>
                    </Border>

                    <!-- RGB -->
                    <Border Background="{DynamicResource BackgroundPrimary}" 
                            CornerRadius="6" 
                            Padding="15,10">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="RGB" 
                                       Foreground="{DynamicResource ForegroundTertiary}" 
                                       FontSize="12" VerticalAlignment="Center"/>
                            <TextBlock x:Name="RgbText" 
                                       Grid.Column="1" 
                                       FontSize="16" 
                                       FontFamily="Consolas"
                                       Foreground="{DynamicResource ForegroundPrimary}" 
                                       HorizontalAlignment="Center"/>
                        </Grid>
                    </Border>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Панель сохранения -->
        <Border x:Name="SavePanel"
                Grid.Row="4" 
                Background="{DynamicResource BackgroundSecondary}" 
                CornerRadius="8"
                Padding="15"
                Visibility="Collapsed">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Выбор размера -->
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Размер:" 
                               Foreground="{DynamicResource ForegroundSecondary}" 
                               VerticalAlignment="Center"
                               Margin="0,0,10,0"/>
                    <ComboBox x:Name="SizeComboBox"
                              Width="100"
                              SelectedIndex="1">
                        <ComboBoxItem Content="256 px"/>
                        <ComboBoxItem Content="512 px"/>
                        <ComboBoxItem Content="2048 px"/>
                        <ComboBoxItem Content="4096 px"/>
                    </ComboBox>
                </StackPanel>

                <!-- Кнопка сохранения -->
                <Button Grid.Column="2"
                        Content="💾 Сохранить PNG"
                        Background="{DynamicResource AccentPrimary}"
                        Foreground="{DynamicResource ForegroundPrimary}"
                        Padding="20,10"
                        FontWeight="SemiBold"
                        Cursor="Hand"
                        Click="SavePng_Click"/>
            </Grid>
        </Border>
    </Grid>
</Window>